
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>icd0007 Sample Application</title>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/list.css">
    <link rel="stylesheet" href="../css/form.css">

    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js" crossorigin="anonymous"></script>

    <script src="../functions.js"></script>

</head>
<body id="employee-list-page">

<div id="root">

    <nav>
        <a href="?cmd=dashboard" id="dashboard-link">Dashboard</a> |
        <a href="?cmd=employee-list" id="employee-list-link">Employees</a> |
        <a href="?cmd=employee-form" id="employee-form-link">Add Employee</a> |
        <a href="?cmd=task-list" id="task-list-link">Tasks</a> |
        <a href="?cmd=task-form" id="task-form-link">Add Task</a>
    </nav>

    <main>

        <div class="content-card">
            <div class="content-card-header">Employees</div>
            <div class="content-card-content" id="rows">

            </div>
        </div>
    </main>

    <footer>
        icd0007 Sample Application
    </footer>

</div>

<script type="text/babel">

    function Rows() {

        const [employees, setEmployees] = React.useState([]);

        React.useEffect(() => {
            (async () => {
                const data = await (await fetch("../employees.json")).json();

                setEmployees(data);
            })();

        }, []);

        const rows =
            <>
                { employees.map(employee =>
                <div className="employee-item" key={employee.id}>
                    <img src={employee.profilePicture}
                         alt="profile picture"/>
                    <span className="name">{employee.firstName } {employee.lastName}</span>
                    <span className="link"><a href="">Edit</a></span>
                    <br /><span className="position">{ classifier(employee.position) }</span>
                </div>)
                }
            </>;

        return rows;
    }

    ReactDOM.createRoot(document.getElementById("rows")).render(<Rows/>);

</script>

</body>
</html>